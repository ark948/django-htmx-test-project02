{% load widget_tweaks %}
{% load ir_date %}

{% if results %}

<h1 class="font-bold text-3xl text-black-500 mb-4 inline-block">
    Search results
</h1>
<h3 class="font-bold text-xl text-black-500 mb-4 ml-4 inline-block">
    Found {{ results_count }} record(s).
</h3>

<!-- the Grid container -->
<div class="flex flex-col-reverse md:grid md:grid-cols-5 md:gap-4">
    <!-- 4/5 cols for table -->
    <div class="col-span-4">
        <div class="overflow-x-auto rounded-box border border-base-content/5 bg-base-200">
            <table class="table table-md">
                <thead>
                    <tr>
                        <th></th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email</th>
                        <th>Phone Number</th>
                        <th>Address</th>
                        <th>Created at:</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in results %}
                        <tr class="hover:bg-base-300">
                            <th>{{ forloop.counter }}</th>
                            <td>{{ item.first_name }}</td>
                            <td>{{ item.last_name }}</td>
                            <td>{{ item.email }}</td>
                            <td>{{ item.phone_number }}</td>
                            <td>{{ item.address }}</td>
                            <td>{{ item.created_at|to_persian }}</td>
                            <td>
                                <button class="btn btn-success btn-xs opacity-100 w-14"
                                        hx-get="{% url 'contacts:item-detail' pk=item.id %}"
                                        hx-trigger="click"
                                        hx-target="#data_to_replace"
                                        hx-on:success="item_modal.showModal();">
                                    View
                                </button>
                            </td>
                            <td>
                                <button class="btn btn-primary btn-xs opacity-100 w-14"
                                        hx-get="{% url 'contacts:edit' pk=item.id %}"
                                        hx-trigger="click"
                                        hx-target="#edit_response_holder"
                                        hx-on:success="edit_contact_modal_container.showModal();">
                                    Edit
                                </button>
                            </td>
                            <td>
                                <button class="btn btn-error btn-xs opacity-100 w-14"
                                        hx-delete="{% url 'contacts:delete' pk=item.id %}"
                                        hx-trigger="click"
                                        hx-target="#contacts_container">
                                    Delete
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                </tfoot>
            </table>
            {% include 'contacts/partials/contact-new-item-modal.html' %}
        </div>
    </div>


    <div class="col-span-1">
        <a href="{% url 'contacts:list' %}" class="link ml-4 btn btn-outline btn-primary btn-sm">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3" />
            </svg>                  
            Refresh / Back to list
        </a>
    </div>
</div>

{% endif %}